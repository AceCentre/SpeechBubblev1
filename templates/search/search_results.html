{% extends "twocol.html" %}
{% load pagination_tags %}
{% load search %}

{% block title %}Search results{% endblock %}

{% block css %}
<link 
	rel="stylesheet" 
	href="/media/css/paginate.css" 
	type="text/css"
/>
<style type="text/css">
	.highlight {
		font-style: italic;
		font-weight: bold;
	}
</style>
{% endblock %}

{% block content %}
{% with results|length as result_count %}
<form method="get" action="/search/">
	<p>
		Found {{ result_count|default:"no" }} result{{ result_count|pluralize }} for
		<input 
			class="search" 
			type="text" 
			name="q" 
			value="{{ query_string }}"
		/>
		<input
			type="submit"
			value="Search again"
		/>
	</p>
</form>
{% endwith %}
{% if results %}
        {% autopaginate results 10 %}
	{% paginate %}
	<dl>
	{% for entry in results %}
		{% searchexcerpt search_terms 6 as content %} {# set `content` object #}
        		{{ entry.long_description|striptags }}
	        {% endsearchexcerpt %}
        	{% highlight search_terms as title %} {# set `title` object #}
		        {{ entry.name }}
	        {% endhighlight %}
		<dt><a href="{{ entry.get_absolute_url }}">{{ title.highlighted }}</a></dt>
		<dd>{{ content.excerpt|highlight:search_terms }}</dd>
	{% endfor %}
	</dl>
	{% paginate %}
{% endif %}
{% endblock %}
